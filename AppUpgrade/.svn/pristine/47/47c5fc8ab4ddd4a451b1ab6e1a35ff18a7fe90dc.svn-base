
<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="utf-8"/>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
		
    	<link href="../../css/mui.min.css" rel="stylesheet" />
		<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.5.0/css/font-awesome.min.css" />
		<title>地图</title>
		<script type="text/javascript">
				var em=null,map=null;
				// H5 plus事件处理
				function plusReady(){
				var address=localStorage.getItem('addresstocompor');
				//alert(address);
				var x=	localStorage.getItem('xmap');
				var y=	localStorage.getItem('ymap');
					
						if(!em||!window.plus||map){return};
						map=new plus.maps.Map("map");
						map.centerAndZoom(new plus.maps.Point(x,y), 15);
				
					//map.setTraffic( true );
					//map.showZoomControls( true );
					//map.showUserLocation( true );
					//map.showUserLocation( true );

//					marker=new plus.maps.Marker();
//					marker.bringToTop();
//					marker.setPoint(new plus.maps.Point(120.176014,36.055348));					
//					marker.setIcon("../../images/beijing.png");
//					marker.setLabel("直招帮");
//					map.addOverlay(marker);
					
					
					jiazaiditu(80);
					function jiazaiditu(data){
						var circleObj=new plus.maps.Circle(new plus.maps.Point(x,y),data);
					//circleObj.setStorkeColor( "#ff0000" );
						circleObj.setFillColor( '#ff0000' );
						circleObj.setFillOpacity( 1 );
						circleObj.setLineWidth( 1 );	
						map.addOverlay(circleObj);
					}
					


 	//var gpsPoint = new BMap.Point(currentLon,currentLat);
 	
 	//translatePoint(x,y);
 	
			function translatePoint(q,w){
			    
			    var gpsPoint = new BMap.Point(q,w);
			    BMap.Convertor.translate(gpsPoint,2,initMap); //坐标转换
			}

			function initMap(point){
			    map = new BMap.Map("map"); //创建地图
			    map.addControl(new BMap.NavigationControl());
			    map.addControl(new BMap.ScaleControl());
			    map.addControl(new BMap.OverviewMapControl());
			    map.centerAndZoom(point,15);
			    map.addOverlay(new BMap.Marker(point));
			 
			}
			
														
				}
				if(window.plus){
					plusReady();
				}else{
					document.addEventListener("plusready",plusReady,false);
				}
				// DOMContentloaded事件处理
				document.addEventListener("DOMContentLoaded",function(){
					em=document.getElementById("map");
						plusReady();
				},false);
				function resetMap(){
					map.reset();
				}
		</script>
		<style type="text/css">
#map {
	width: 100%;
	position: fixed;
	top: 46px;
	bottom: 0px;
	line-height: 200px;
	text-align: center;
	background: #FFFFFF;
}
 /*头部区域*/

        .mui-bar {
            background-color: #5CA8FC;
            height: 10%;
        }

        .mui-bar .mui-icon:active {
            opacity: 1;
        }
	</style> 
	</head>
	<body>
		<header id="header2" class="mui-bar mui-bar-nav header-top">
		    <a id="back" href="job.html" class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color:#fff"></a>
		    <h1 class="mui-title" style="color: white;">地图</h1>
		</header>
		<div id="map"style="height: 85%;"class="mui-action-back"></div>
		<div id="libaiduditu" class="mui-table-view-cell libaiduditu" style="width:100%;height:8%;font-size:12px;line-height:60px;padding:0;padding-left:35px;background: #fff url(images/weizhi.png) no-repeat 15px center;background-size: 14px;position: absolute;bottom: 0;">
			
		</div>
	</body>
	<!--<script type="text/javascript">
		var back = document.querySelector('#back');
		back.addEventListener('click',function(){
			mui.close();
		})
	</script>-->
	<script type="text/javascript">
		var libaiduditu = document.querySelector('#libaiduditu');
		var address=localStorage.getItem('addresstocompor');
//		alert(address);
		libaiduditu.innerHTML = address;
		libaiduditu.addEventListener('click',function(){
			resetMap();
		})
	</script>
</html>