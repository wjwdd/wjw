<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="css/mui.min.css" rel="stylesheet" />
		<script src="js/mui.min.js"></script>
	</head>
	<style type="text/css">
		html,
		body {
			width: 100%;
			height: 100%;
		}
		
		@font-face {
			font-family: 'lanze';
			src: url('lib/fonts/icomoon.eot') format('embedded-opentype'), url('lib/fonts/icomoon.svg') format('svg'), url('lib/fonts/icomoon.ttf') format('truetype'), url('lib/fonts/icomoon.woff') format('woff');
		}
		
		[class^="icon-"],
		[class*=" icon-"] {
			font-family: lanze;
			font-style: normal;
		}
		
		.icon-mobilephone:before {
			content: "\e908";
			font-size: 13px;
		}
		/*头部栏颜色*/
		
		.header-top {
			/*background-color: #5CA8FC;*/
			opacity: 1;
			z-index: 1001;
		}
		/*#circle {
				z-index: 9999;
				height: 100px;
			}*/
		
		#slider {
			z-index: 1000;
			overflow: hidden;
		}
		
		#circle .mui-table-view-cell {
			padding-top: 0;
			padding-bottom: 0;
			background-color: #fff;
			border: none;
		}
		
		#circle .mui-table-view-cell span {
			display: inline-block;
			width: 2.4em;
			height: 2.3em;
			background-image: url(images/index_circle.png);
			background-size: 200% 200%;
			background-repeat: no-repeat;
		}
		
		#circle .mui-table-view-cell {
			position: relative;
			overflow: hidden;
		}
		
		.kuaisu {
			background-position: left bottom;
		}
		
		.fujin {
			background-position: left top;
		}
		
		.zixun {
			background-position: right bottom;
		}
		
		.mingqi {
			background-position: right top;
		}
		/*筛选框*/
		
		#selector span {
			display: inline-block;
			border: 1px solid #737373;
			border-radius: 5px;
			margin-right: 9px;
			margin-bottom: 14px;
			height: 20px;
			line-height: 10px;
			padding: 6px 12px;
			box-sizing: border-box;
			font-size: 10px;
			overflow: hidden;
		}
		
		#selected {
			padding: 12px 23px 14px 32px;
		}
		/*消息面板*/
		
		.news-tab {
			height: 70px;
			background-color: #fff;
		}
		
		.news-tab .left {
			width: 70px;
			height: 100%;
			float: left;
			box-sizing: border-box;
			padding: 12px 10px 12px 13px;
		}
		
		.news-tab .left img {
			width: 100%;
			height: 100%;
		}
		
		.news-tab .right {
			width: 70%;
			height: 100%;
			float: left;
			padding: 16px 13px 16px 0;
		}
		
		.news-tab .right .line-one {
			font-size: 14px;
			line-height: 14px;
			height: 14px;
			margin-bottom: 12px;
			color: #323232;
			position: relative;
		}
		
		.news-tab .right .line-one span {
			position: absolute;
			right: 0;
			top: 0;
			color: #5CA8FC;
			font-size: 14px;
		}
		
		.news-tab .right .line-two {
			font-size: 12px;
			line-height: 12px;
			height: 12px;
			color: #737373;
		}
		/*设置面板*/
		
		#tabbar-with-my .title {
			position: relative;
			height: 139px;
			background-image: url("images/beijing.png");
			background-repeat: no-repeat;
			background-size: 100% 139px;
			padding: 40px 13px 0 11px;
			overflow: hidden;
		}
		
		#tabbar-with-my .title .left {
			/*width:17.3%;*/
			padding-left: 11px;
			width: 69px;
			float: left;
		}
		
		#tabbar-with-my .title .left img {
			width: 100%;
			height: 100%;
		}
		
		#tabbar-with-my .title .right {
			padding-top: 13px;
			padding-left: 14px;
			float: left;
			color: #fff;
			position: relative;
			width: 70%;
		}
		
		#tabbar-with-my .title .right .line-one {
			margin-bottom: 13px;
			font-size: 13px;
			height: 13px;
			line-height: 13px;
		}
		
		#tabbar-with-my .title .right .line-two {
			font-size: 11px;
			height: 11px;
			line-height: 11px;
		}
		
		.arrow {
			position: absolute;
			right: 3px;
			top: 50%;
			margin-top: -6px;
			width: 9px;
			height: 20px;
			overflow: hidden;
		}
		
		.arrow::after {
			content: ' ';
			position: absolute;
			right: 3px;
			top: 0;
			width: 12px;
			height: 12px;
			border: 3px solid #C4CDD9;
			transform: rotate(45deg);
		}
		/*已申请职位，收藏。。。*/
		
		#tabbar-with-my .news-content .block {
			width: 33.3%;
			float: left;
			margin: 13px 0;
			font-size: 12px;
			line-height: 12px;
			background-color: #fff;
		}
		
		#tabbar-with-my .news-content .block+div {
			border-left: 1px solid #cdcdcd;
		}
		
		#tabbar-with-my .news-content .block .img-t {
			position: relative;
			left: 50%;
			margin-left: -15px;
			width: 30px;
		}
		
		#tabbar-with-my .news-content .block .text-b {
			padding-top: 9px;
			width: 100%;
			text-align: center;
		}
		/*客服热线，招聘合作*/
		
		#tabbar-with-my .news-service .news-service-item {
			width: 100%;
			height: 60px;
			background-color: #fff;
		}
		
		#tabbar-with-my .news-service .news-service-item .left1 {
			box-sizing: border-box;
			padding: 17px 8px 0 10px;
			height: 60px;
			width: 40px;
			float: left;
		}
		
		#tabbar-with-my .news-service .news-service-item .left1 img {
			width: 100%;
		}
		
		#tabbar-with-my .news-service .news-service-item .left2 {
			color: #757575;
			font-size: 11px;
			line-height: 11px;
			float: left;
			padding: 24px 0;
		}
		/*顶部栏颜色*/
		/*header {*/
		/*background-color: #5CA8FC !important;	*/
		/*}*/
		/*下拉框列表项小标签格式*/
		
		#sel_box {
			/*height: 0px!important;*/
			overflow-y: scroll;
			background-color: #EBEBEB!important;
			padding: 10px 10px;
			padding-left: 25px;
		}
		
		#sel_box div {
			display: inline-block;
			font-size: 10px;
			height: 24px;
			line-height: 20px;
			box-sizing: border-box;
			padding: 3px 12px;
			background-color: #EBEBEB;
			border-radius: 5px;
			margin-bottom: 13px;
			margin-right: 9px;
			border: 1px solid #737373;
			color: #333333;
			/*background-color: red;*/
		}
		
		#sel_box div:hover {
			background-color: #5CA8FC!important;
			color: #FFFFFF;
			border: 1px solid #5CA8FC;
		}
		
		.mui-backdrop {
			position: fixed;
			top: 0;
			right: 0;
			bottom: 0;
			left: 0;
			z-index: 998;
			background-color: rgba(0, 0, 0, .3);
		}
		
		.fuwu {
			z-index: 1000;
			border-bottom: 1px!important;
		}
		
		#bg {
			position: fixed;
			left: 0px;
			top: 0px;
			width: 100%;
			height: 100%;
			text-align: center;
			z-index: 500;
			background-color: #333;
			opacity: 0;
			display: none;
		}
		
		.xian {
			border-bottom: 2px solid #F9F9F9;
		}
		
		#job_list li {
			/*padding: 10px!important;*/
			/*background-color: red;*/
		}
		
		#selector1,
		#selector2,
		#selector3,
		#selector4 {
			overflow: hidden;
		}
		/*#selector1,
			#selector2,
			#selector3,
			#selector4:hover {
				background-color: #5CA8FC!important;
			}*/
		
		#slideDown1 {
			display: none;
			text-align: center;
		}
		
		#slideDown2 {
			display: none;
			text-align: center;
		}
		/*.outerScroller {
				overflow: hidden;
			}*/
	</style>

	<body>
		<div id="tabbar" class="mui-control-content mui-active" style="height:100%;">
			<!--顶部栏-->
			<!--<header id="header" class="mui-bar mui-bar-nav header-top" style="position: fixed;">-->
			<!--<a href="app/login/bianji_delete.html"><h1 class="mui-title">蓝泽信息</h1></a>-->

			<!--<a href="app/citylist/citylist.html" style="color:#737373;">
					<div style="width:80px;display: inline-block;" id="quanguo">
						<div id="area" style="padding-left:8px;float:left;font-size:14px;line-height: 44px;width:50px ;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">

						</div>
						<div style="width:12px;height:100%;float:left;padding-left:2px;padding-top:11px;box-sizing: content-box;">
							<img id="quanguo_img" src="images/xiala.png" style="width:100%;" alt="" />
						</div>
					</div>
				</a>-->
			<!--<a href="app/search/search.html">
					<div class="mui-title" style="right:80px;left:80px;display: inline-block;height:33px;margin-top:5px;background-color: #efefef;border-radius: 15px;border: 1px solid #bab9b7;">
						<div style="position: absolute;left:14px;top:9px;width:19px;height:16px;background-image: url(images/sousuo.png);background-repeat: no-repeat;background-size: 19px 16px;">
						</div>
					</div>
				</a>-->
			<!--<a href="app/zhaopin/zhao.html" style="color:#737373;">
					<div id="zhaopin" style="float:right;font-size:14px;line-height: 44px;width:60px ;">
						免费招聘
					</div>
				</a>-->
			<!--</header>-->
			<!--<a href="test.html" style="color:#737373;">
                <div style="width:80px;display: inline-block;" id="quanguo">
                    <div id="area" style="position:absolute;right:10px;top:0;font-size:14px;line-height: 44px;width:45px ;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">
                    		测试
                    </div>
                </div>
          </a>-->
			<!--
       	作者：offline
       	时间：2017-04-20
       	描述：lunbotu
       -->
			<!--<div style="height: 45px;"></div>-->
			<!--<div id="slideDown">
				<div id="slideDown1">
					<p>松开刷新</p>
				</div>
				<div id="slideDown2">
					<p>正在刷新 ...</p>
				</div>
			</div>-->
			<!--动画-->
			<!--<div class="flash">
				<img src="images/jiazai.png" class="animation-rotate" />
			</div>-->
			<div class="outerScroller" id="pullrefresh">
				<!--<div class="jiazai" style="text-align: center; display: none;"><span class="mui-icon mui-spinner"></span></div>-->
				<!--<div class="scroll"></div>-->

				<div id="slider" class="mui-slider" style="height: 120px;z-index: 2000;">
					<img src="images/beijing.png" style="height:120px;width:100% ;" />
				</div>
				<div class="mui-content zhe" style="padding:0;background-color: #fff;margin-top: 0px;" id="circle">
					<ul class="mui-table-view mui-grid-view mui-grid-9" style="margin:0;">
						<li class="mui-table-view-cell mui-media mui-col-xs-3 mui-col-sm-3">
							<a href="app/circle/kuaisu/kuaisu.html">
								<span class="kuaisu"></span>
								<div class="mui-media-body" style="text-overflow: initial;">快速入职</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-3 mui-col-sm-3">
							<a href="app/circle/fujin/fujin.html">
								<span class="fujin"></span>
								<div class="mui-media-body" style="text-overflow: initial;">附近职位</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-3 mui-col-sm-3">
							<a href="app/circle/mingqi/famousenterprise.html">
								<span class="mingqi"></span>
								<div class="mui-media-body" style="text-overflow: initial;">名企推荐</div>
							</a>
						</li>
						<li class="mui-table-view-cell mui-media mui-col-xs-3 mui-col-sm-3">
							<a href="app/circle/zhichang/zhichang.html">
								<span class="zixun"></span>
								<div class="mui-media-body" style="text-overflow: initial;">职场分类</div>
							</a>
						</li>
					</ul>
				</div>

				<!--四个小圆图标-->

				<!--筛选框-->
				<div style="height:44px;position: relative;" id="selector" class="fuwu">
					<!--下拉框-->

					<!--区域-->
					<div id="selector1" class="xian" style="width:25%;height:44px;float: left;background-color:#fff;line-height: 44px;font-size:13px;padding-left:21px;box-sizing: border-box">
						<div class="sel-text" style="float:left;" id="quyu">
							区域
						</div>
						<div class="sel-img" style="padding-left:6px;float: left;">
							<img src="images/xiala.png" class="tu" style="width:14px;height:10px;" alt="">
							<!--<img src="images/blue.png"  style="width:11px;height:8px;" style="display: none;"/>-->
						</div>
					</div>
					<!--职位-->
					<div id="selector2" class="xian" style="width:25%;height:44px;float: left;background-color:#fff;line-height: 44px;font-size:13px;padding-left:21px;box-sizing: border-box">
						<div class="sel-text" style="float:left;" id="zhiwei">
							职位
						</div>
						<div class="sel-img" style="padding-left:6px;float: left;">
							<img src="images/xiala.png" class="tu2" style="width:14px;height:10px;" alt="">
						</div>
					</div>
					<!--薪资-->
					<div id="selector3" class="xian" style="width:25%;height:44px;float: left;background-color:#fff;line-height: 44px;font-size:13px;padding-left:21px;box-sizing: border-box">
						<div class="sel-text" style="float:left;" id="xinzi">
							薪资
						</div>
						<div class="sel-img" style="padding-left:6px;float: left;">
							<img src="images/xiala.png" class="tu3" style="width:14px;height:10px;" alt="">
						</div>
					</div>
					<!--福利-->
					<div id="selector4" class="xian" style="width:25%;height:44px;float: left;background-color:#fff;line-height: 44px;font-size:13px;padding-left:21px;box-sizing: border-box">
						<div class="sel-text" style="float:left;" id="fuli">
							福利
						</div>
						<div class="sel-img" style="padding-left:6px;float: left;">
							<img src="images/xiala.png" class="tu4" style="width:14px;height:10px;" alt="">
						</div>
					</div>

					<!--模态框-->

					<div class="mui-scroll-wrapper" id="sel_box" style=" display: none; position: absolute;top:44px;min-height:80px;background-color: #fff;width:100%;z-index: 1000;height:80px;">
						<div class="mui-scroll" style="padding:0;height:100%;width:100%;border:none;margin:0;">
						</div>
					</div>
					<div id="bg">

					</div>

				</div>

				<!--
        	作者：offline
        	时间：2017-04-20
        	描述：职位列表首次加载
        -->
				<ul class="mui-table-view mui-content mui-scroll-wrapper" style="width: 100%; margin: 0px; padding: 0;" id="job_list">
					<!-- <ul class="mui-table-view" id="job_list">	-->
				</ul>
			</div>
			<!--下拉滚动-->
			<!--<div id="refreshContainer" class="mui-content mui-scroll-wrapper" style="padding:0;">
            <div class="mui-scroll">
               
                <ul class="mui-table-view" id="job_list2">

                </ul>
            </div>
        </div>-->
			<!--
 	作者：offline
 	时间：2017-04-20
 	描述：
 -->
			<!--<div class="donghuacheng" style="text-align: center; display: none;"><span class="mui-icon mui-spinner"></span></div>
			<div class="wenzi" style="text-align: center;display: none;">没有数据</div>
			<div class="" style="height: 75px;">
			</div>-->
			<!--<nav class="mui-bar mui-bar-tab" id="footer">
				<a class="mui-tab-item mui-active" href="#tabbar">
					<span class="mui-icon mui-icon-home"></span>
					<span class="mui-tab-label">首页</span>
				</a>
				<a class="mui-tab-item" href="community.html" id="communityLink">
					<span class="mui-icon mui-icon-chatbubble"></span>
					<span class="mui-tab-label">社区</span>
				</a>

				<a class="mui-tab-item" href="xiaoxi.html">
					<span class="mui-icon mui-icon-email"></span>
					<span class="mui-tab-label">消息</span>
				</a>
				<a class="mui-tab-item" href="wode.html">
					<span class="mui-icon mui-icon-contact"></span>
					<span class="mui-tab-label">我的</span>
				</a>
			</nav>-->
	</body>
	<!--首页筛选框实现-->
	<!--<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>-->
	<script>
		//		document.addEventListener('DOMContentLoaded', function() {
		//			document.querySelector('main').className += 'loaded';
		//		});
		//		localStorage.setItem('cityName','青岛');
		//		var cityName = localStorage.getItem('cityName');
		//		var area222 = document.querySelector('#area');
		//		//		area222.innerHTML = cityName;
		//		if(localStorage.getItem('cityChanged')) {
		//			area222.innerHTML = cityName;
		//		} else {
		//			area222.innerHTML = '全国';
		//			localStorage.setItem('cityid', 805);
		//		}

		var selector1 = document.querySelector('#selector1');
		var selector2 = document.querySelector('#selector2');
		var selector3 = document.querySelector('#selector3');
		var selector4 = document.querySelector('#selector4');
		var quyu = document.querySelector('#quyu');
		var zhiwei = document.querySelector('#zhiwei');
		var xinzi = document.querySelector('#xinzi');
		var fuli = document.querySelector('#fuli');
		var bg = document.getElementById('bg');

		var selectorFlag = false; // false时表示不显示筛选框筛选出的数据
		var selectPage = 1; // 筛选框页数标识
		var sel_box = document.querySelector('#sel_box');
		var tabbar = document.querySelector('#tabbar');
		var flag = document.querySelector('#sel_box').style.display;
		var tu = document.querySelector('.tu')
		var tu2 = document.querySelector('.tu2')
		var tu3 = document.querySelector('.tu3')
		var tu4 = document.querySelector('.tu4')
		//		console.log(flag)

		selector1.onclick = function() {
			bg.style.display = "block";
		}
		selector2.onclick = function() {
			bg.style.display = "block";
			if(flag == 'none') {
				tu2.src = 'images/blue.png';
			}
		}
		selector3.onclick = function() {
			bg.style.display = "block";
			if(flag == 'none') {
				tu3.src = 'images/blue.png';
			}
		}
		selector4.onclick = function() {
			bg.style.display = "block";
			if(flag == 'none') {
				tu4.src = 'images/blue.png';
			}
		}
		bg.onclick = function() {
			bg.style.display = "none";
			sel_box.style.display = "none";
			if(flag == 'none') {
				tu.src = 'images/xiala.png';
			}
			if(flag == 'none') {
				tu2.src = 'images/xiala.png';
			}
			if(flag == 'none') {
				tu3.src = 'images/xiala.png';
			}
			if(flag == 'none') {
				tu4.src = 'images/xiala.png';
			}
		}

		//var mask = mui.createMask(function() {
		//sel_box.style.display = 'none';
		//	tabbar.style.overflow = 'auto';
		//});

		// 地区(注：地区不能使用下边定义的函数)
		selector1.addEventListener('click', function() {
			if(flag == 'none') {
				tu.src = 'images/blue.png';
			} else {
				tu.src = 'images/xiala.png';
			}
			var event = window.event || event;　
			if(event.stopPropagation) {　　
				event.stopPropagation();　　
			} else {　　　　
				event.cancelBubble = true;　　
			}

			//tabbar.style.overflow = 'hidden';
			//tabbar.style.backgroundColor = 'red';
			//tabbar.style.filter = 'alpha(opacity=60)';

			document.body.style.height = '100%';
			var cityid = localStorage.getItem('cityid');
			var cityName = localStorage.getItem('cityName');
			mui.ajax($$$.siturl + 'm=App&c=CityTolist&a=cityTodetaile&id=' + cityid, {
				type: 'get',
				dataType: 'json',
				success: function(data) {
					//					console.log(JSON.stringify(data));
					sel_box.innerHTML = '';
					sel_box.style.display = "block";
					var sel_areas = data.data;
					// 创建不限小标签
					var div2 = document.createElement('div');
					div2.innerHTML = '不限';
					div2.setAttribute('data-did', '');
					//					alert(1)
					//										div2.setAttribute('id', 'xiao');

					// 小标签点击事件
					//					div2.id = 'xiao';
					//						//					console.(div2)
					var sdd = document.querySelector('#xiao');
					//					console.dir(sdd);
					div2.addEventListener('click', function() {
						if(flag == 'none') {
							tu.src = 'images/xiala.png';
						}
						if(this.innerHTML == "不限") {
							quyu.innerHTML = "区域"
						};
						bg.style.display = "none";
						sel_box.style.display = "none";
						//						sel_box.style.display = 'none';

						// ajax请求相应的数据
						// 准备数据(4项数据都需要提交)
						var did = this.getAttribute('data-did');
						sessionStorage.setItem('sel_did', did);
						//                  alert(did);
						// 创建好用于上传的数据
						var updata = createUpData();
						//						alert(updata)
						//						console.log(updata)
						//
						//alert($$$.siturl + 'm=App&c=index&a=qxhj' + updata);	               	                
						mui.ajax($$$.siturl + 'm=App&c=index&a=qxhj' + updata, {
							type: 'get',
							dataType: 'json',
							success: function(data) {
								//																alert(data)
								console.log(JSON.stringify(data.data));
								//    						alert(JSON.stringify(data));
								//        						var data = JSON.stringify(data);
								selectorFlag = true;
								// 职位详细信息
								var jobs_sel = data.data;
								//								console.log(jobs_sel);
								// if(jobs_sel==null||jobs_sel=='')return;
								var job_list = document.querySelector('#job_list');
								job_list.innerHTML = '';
								for(var x = 0; x < jobs_sel.length; x++) {
									new CreateList_index({
										id: 'job_list',
										data: jobs_sel[x]
									})
								}
								// 给每个条目绑定事件
								var ul = document.querySelector('#job_list')
								var lis = ul.children;
								for(var x = 0; x < lis.length; x++) {
									lis[x].addEventListener('click', function() {
										//																				alert(1)
										var id = this.children[0].getAttribute('data-id');
										localStorage.setItem('jid', id);
										console.log(jid)
										bg.style.display = "none";
										sel_box.style.display = "none";
									})
								}
							},
							error: function(xhr, err) {

							}
						});

					});

					if(sel_box.appendChild) {
						sel_box.appendChild(div2);
					} else {
						sel_box.append(div2);
					}

					for(var x = 0; x < sel_areas.length; x++) {
						var div = document.createElement('div');
						div.innerHTML = sel_areas[x].categoryname;
						div.setAttribute('data-did', sel_areas[x].categoryname);
						//						var did = this.getAttribute('data-did');
						div.addEventListener('click', function() {
							if(flag == 'none') {
								tu.src = 'images/xiala.png';
							}
							//							alert(did)
							//							alert(3)
							quyu.innerHTML = this.innerHTML;
							//							console.log(this.innerHTML)
							//							console.log(sel_areas[x].cnane)
							//mask.close();
							bg.style.display = "none";
							sel_box.style.display = "none";

							// ajax请求相应的数据
							// 准备数据(4项数据都需要提交)
							var did = this.getAttribute('data-did');
							sessionStorage.setItem('sel_did', did);
							//                      alert(did); 
							// 创建好用于上传的数据
							var updata = createUpData();

							mui.ajax($$$.siturl + 'm=App&c=index&a=qxhj' + updata, {
								type: 'get',
								dataType: 'json',
								success: function(data) {
									//        						alert(JSON.stringify(data));
									//        						var data = JSON.stringify(data);
									selectorFlag = true;
									// 职位详细信息
									var jobs_sel = data.data;
									var job_list = document.querySelector('#job_list');
									job_list.innerHTML = '';

									for(var x = 0; x < jobs_sel.length; x++) {
										//				                	alert('done'); 
										new CreateList_index({
											id: 'job_list',
											data: jobs_sel[x]
										})
									}
									// 给每个条目绑定事件
									var ul = document.querySelector('#job_list')
									var lis = ul.children;
									for(var x = 0; x < lis.length; x++) {
										lis[x].addEventListener('click', function() {
											//											alert(2)
											var id = this.children[0].getAttribute('data-id');
											localStorage.setItem('jid', id);
											//alert(localStorage.getItem('jid'))
										})
									}

								},
								error: function(xhr, err) {
									alert(err);
								}
							});

						});
						if(sel_box.appendChild) {
							sel_box.appendChild(div);
						} else {
							sel_box.append(div);
						}
					}
				},
				error: function(xhr) {
					alert(xhr);
				}
			});
			//区域结束 
		});

		// 职位
		selector2.addEventListener('click', function() {

			getSelData({
				urls: 'm=App&c=TagToli&a=zhiwei',
				dataName: 'zhiwei',
				parseNum: 'id',
				parseName: 'categoryname',
				mark: 'data-zid', // 标签的自定义属性名称
				localMark: 'sel_zid' // 用来存放本地缓存的特有字段
			});
		});

		// 薪资
		selector3.addEventListener('click', function() {

			getSelData({
				urls: 'm=App&c=TagToli&a=wge',
				dataName: 'wge',
				parseNum: 'c_id',
				parseName: 'c_name',
				mark: 'data-xid', // 标签的自定义属性名称
				localMark: 'sel_xid' // 用来存放本地缓存的特有字段
			});
		});

		// 福利
		selector4.addEventListener('click', function() {
			getSelData({
				urls: 'm=App&c=TagToli&a=welfare',
				dataName: 'welfare',
				parseNum: 'c_id',
				parseName: 'c_name',
				mark: 'data-fid', // 标签的自定义属性名称
				localMark: 'sel_fid' // 用来存放本地缓存的特有字段
			});
		});

		// 单个筛选框的实现
		function getSelData(options) {
			// 准备变量
			var urls = options.urls;
			var dataName = options.dataName;
			var parseNum = options.parseNum;
			var parseName = options.parseName;
			var mark = options.mark;
			var localMark = options.localMark;
			// 用于放数据的sel_box盒子

			document.body.style.height = '100%';
			//tabbar.style.overflow = 'hidden';

			// 打开遮罩层
			//      var mask = mui.createMask(function (){
			//          sel_box.style.display = 'none';
			//          tabbar.style.overflow = 'auto';
			//      }); 

			//callback为用户点击蒙版时自动执行的回调；
			//mask.show();//显示遮罩

			// 获取数据
			mui.ajax($$$.siturl + urls, {
				type: 'get',
				dataType: 'json',
				success: function(data) {
					var sel_data = data[dataName];
					//					alert(data[dataName])
					//										console.log(JSON.stringify(data[dataName]))

					// 创建不限小标签
					sel_box.innerHTML = '';
					sel_box.style.display = "block";
					var div2 = document.createElement('div');
					div2.innerHTML = '不限';
					div2.setAttribute('data-did', '');
					div2.addEventListener('click', function() {
						//点击不限
						//						console.log(this.innerHTML)
						//						alert(8)
						//mask.close();
						if(dataName == "zhiwei") {
							if(this.innerHTML == "不限") {
								zhiwei.innerHTML = "职位"
							};
							if(flag == 'none') {
								tu2.src = 'images/xiala.png';
							}
						}
						if(dataName == "wge") {
							if(this.innerHTML == "不限") {
								xinzi.innerHTML = "薪资"
							};
							if(flag == 'none') {
								tu3.src = 'images/xiala.png';
							}
						}
						if(dataName == "welfare") {
							if(this.innerHTML == "不限") {
								fuli.innerHTML = "福利"

							};
							if(flag == 'none') {
								tu4.src = 'images/xiala.png';
							}
						}
						sel_box.style.display = "none";
						bg.style.display = "none";
						//						$('#sel_box').fadeOut(600);
						sessionStorage.setItem(localMark, ''); // 将选中的id放入本地以待后期存取使用						
						// 创建提交字符串
						updata = createUpData();
						//alert($$$.siturl + 'm=App&c=index&a=qxhj' + updata);
						mui.ajax($$$.siturl + 'm=App&c=index&a=qxhj' + updata, {
							type: 'get',
							dataType: 'json',
							success: function(data) {
								//        						alert(JSON.stringify(data));
								//        						var data = JSON.stringify(data);
								selectorFlag = true;
								// 职位详细信息
								var jobs_sel = data.data;
								var job_list = document.querySelector('#job_list');
								job_list.innerHTML = '';
								//				                alert(jobs_sel);
								for(var x = 0; x < jobs_sel.length; x++) {
									//				                	alert('done'); 									
									new CreateList_index({
										id: 'job_list',
										data: jobs_sel[x]
									})
								}
								// 给每个条目绑定事件
								var ul = document.querySelector('#job_list')
								var lis = ul.children;
								for(var x = 0; x < lis.length; x++) {
									lis[x].addEventListener('click', function() {
										var id = this.children[0].getAttribute('data-id');
										localStorage.setItem('jid', id);
										//							alert(localStorage.getItem('jid'))
									})
								}
							},
							error: function(xhr, err) {

							}
						});
					});
					//点击不限结束
					if(sel_box.appendChild) {
						sel_box.appendChild(div2);
					} else {
						sel_box.append(div2);
					}
					for(var x = 0; x < sel_data.length; x++) {
						var div = document.createElement('div');
						div.innerHTML = sel_data[x][parseName];
						//						alert(div.innerHTML)
						//						console.log(sel_data[x][parseName])
						div.setAttribute(mark, sel_data[x][parseName]);
						// 单个元素的点击事件
						//						console.log(mark)
						div.addEventListener('click', function() {
							//mask.close();
							//							alert(dataName)
							if(dataName == "zhiwei") {
								zhiwei.innerHTML = this.innerHTML;
								if(flag == 'none') {
									tu2.src = 'images/xiala.png';
								}

							}
							if(dataName == "wge") {
								xinzi.innerHTML = this.innerHTML;
								if(flag == 'none') {
									tu3.src = 'images/xiala.png';
								}
							}
							if(dataName == "welfare") {
								fuli.innerHTML = this.innerHTML;
								//								fuli.style.fontSize = "10px";
								console.dir(fuli)
								if(flag == 'none') {
									tu4.src = 'images/xiala.png';
								}
							}
							sel_box.style.display = "none";
							bg.style.display = "none";
							//							sel_box.style.display = "none";
							// ajax请求相应的数据
							// 准备数据
							var id = this.getAttribute(mark);
							sessionStorage.setItem(localMark, id); // 将选中的id放入本地以待后期存取使用
							//							alert(id); // 质检员						
							// 创建提交字符串
							updata = createUpData();
							//						alert($$$.siturl + 'm=App&c=index&a=qxhj' + updata);      
							mui.ajax($$$.siturl + 'm=App&c=index&a=qxhj' + updata, {
								type: 'get',
								dataType: 'json',
								success: function(data) {
									//        						alert(JSON.stringify(data));
									//        						var data = JSON.stringify(data);
									selectorFlag = true;
									// 职位详细信息
									var jobs_sel = data.data;
									//									alert(jobs_sel.length)
									var job_list = document.querySelector('#job_list');
									job_list.innerHTML = '';
									//小标签的点击事件
									//				                alert(jobs_sel);
									if(jobs_sel == null || jobs_sel == '') return;
									for(var x = 0; x < jobs_sel.length; x++) {
										//				                	alert('done'); 
										new CreateList_index({
											id: 'job_list',
											data: jobs_sel[x]
										})
									}
									// 给每个条目绑定事件
									var ul = document.querySelector('#job_list')
									var lis = ul.children;
									for(var x = 0; x < lis.length; x++) {
										lis[x].addEventListener('click', function() {
											var id = this.children[0].getAttribute('data-id');
											localStorage.setItem('jid', id);
										})
									}
								},
								error: function(xhr, err) {

								}
							});

						});
						// 插入放置小标签的盒子
						if(sel_box.appendChild) {
							sel_box.appendChild(div);
						} else {
							sel_box.append(div);
						}
					}
				},
				error: function(xhr, err) {

				}
			});
		}

		// 将选中的值传给筛选框，还没有写内容
		function bindStrToSel() {

		}

		// 准备好筛选框将要提交的数据
		function createUpData() {
			var up_xid; // 薪资
			var str = ''; // 用于返回的字符串
			var min = ''; // 最低薪资
			var max = ''; // 最高薪资
			// 校验数据，如果贝蒂可以拿到四个数据，则直接赋值，否则令其为空。
			// 地区 
			if(!sessionStorage.getItem('sel_did')) {
				str += '&dist=';
			} else {
				str += '&dist=' + sessionStorage.getItem('sel_did');
			}
			// 职位
			if(!sessionStorage.getItem('sel_zid')) {
				str += '&job=';
			} else {
				str += '&job=' + sessionStorage.getItem('sel_zid');
			}
			// 薪资
			var sel_xid_flag = sessionStorage.getItem('sel_xid');

			if(!sel_xid_flag) {

				str += '&min=&max=';
			} else {
				up_xid = sessionStorage.getItem('sel_xid');
				var re = /([0-9]+)([0-9]+)/g;
				min = up_xid.match(re)[0];
				max = up_xid.match(re)[1];
				str += '&min=' + min + '&max=' + max;
			}
			// 福利
			if(!sessionStorage.getItem('sel_fid')) {
				str += '&welfare=';
			} else {
				str += '&welfare=' + sessionStorage.getItem('sel_fid');
			}
			return str;
		}
	</script>
	<!--主要js区域-->
	<script>
		//		mui('body').on('tap', 'a', function() {
		//			//		document.location.href = 'app/community/community.html';
		//			document.location.href = this.href;
		//		});

		//		function getScrollTop() {
		//			var scrollTop = 0;
		//			if(document.documentElement && document.documentElement.scrollTop) {
		//				scrollTop = document.documentElement.scrollTop;
		//			} else if(document.body) {
		//				scrollTop = document.body.scrollTop;
		//			}
		//			return scrollTop;
		//		}
		//
		//		//获取当前可视范围的高度 
		//		function getClientHeight() {
		//			var clientHeight = 0;
		//			if(document.body.clientHeight && document.documentElement.clientHeight) {
		//				clientHeight = Math.min(document.body.clientHeight, document.documentElement.clientHeight);
		//			} else {
		//				clientHeight = Math.max(document.body.clientHeight, document.documentElement.clientHeight);
		//			}
		//			return clientHeight;
		//		}
		//
		//		//获取文档完整的高度 
		//		function getScrollHeight() {
		//			return Math.max(document.body.scrollHeight, document.documentElement.scrollHeight);
		//		}
		//		window.onscroll = function() {
		//			if(getScrollTop() + getClientHeight() == getScrollHeight()) {
		//				page++;
		//				document.querySelector(".donghuacheng").style.display = "block";
		//				setTimeout(function() {
		//					sssrequest(page);
		//					document.querySelector(".donghuacheng").style.display = "none";
		//				}, 1000)
		//
		//			}
		//		}

		document.addEventListener("plusready", function() {
			//var slider = mui("#slider");		
			//var slider =document.querySelector('#slider');	

			var backButtonPress = 0;
//			mui.back = function(event) {
//				backButtonPress++;
//				if(backButtonPress > 1) {
//					plus.runtime.quit();
//				} else {
//					plus.nativeUI.toast('再按一次退出应用');
//				}
//				setTimeout(function() {
//					backButtonPress = 0;
//				}, 1000);
//				return false;
//			};

			mui.ajax($$$.siturl + 'm=App&c=index&a=pingguo', {
				type: 'get',
				success: function(str) {
					var data = JSON.parse(str);
					// var sliderbox = document.querySelector('#slider');
					// lunbotu(data.lunbotu);
					creaimg(slider, data.lunbotu);
					//var job_list2 = document.querySelector('#job_list2');
					var jobs = data.data;
					for(var x = 0; x < jobs.length; x++) {
						if(x < 5) {
							zhiding = '<span class="" style="color:white;display: inline-block;width: 40px;height:17px;text-align:center;font-size:10px;border-bottom-left-radius:3px;border-top-left-radius: 3px;font-weight:400;position: absolute;top:8px;right:0px;background: #ff7113;">急招</span>';
						} else {
							zhiding = '';
						}
						new CreateList_index({
							id: 'job_list',
							bg: '',
							data: jobs[x]
						})
					}
					var ul = document.querySelector('#job_list')
					var lis = ul.children;
					for(var x = 0; x < lis.length; x++) {
						lis[x].addEventListener('click', function() {
							var id = this.children[0].getAttribute('data-id');
							localStorage.setItem('jid', id);
						})
					}
				}
			});
		})

		//轮播
		function creaimg(div, data) {
			var leng = data.length;
			var str = "";
			str += '<div class="mui-slider-group mui-slider-loop">';
			str += '<div class="mui-slider-item mui-slider-item-duplicate" data-id="' + data[leng - 1].isgot + '"  data-jid="' + data[leng - 1].jid + '" onclick="gotolintopost(this)">'

			str += '<img src="' + $$$.imgurl + data[leng - 1].img + '" data-id="' + data[leng - 1].isgot + '"  data-jid="' + data[leng - 1].jid + '" >'

			str += '</div>'
			for(var i = 0; i < leng; i++) {

				str += '<div class="mui-slider-item" data-id="' + data[i].isgot + '"  data-jid="' + data[i].jid + '" onclick="gotolintopost(this)">'

				str += '<img src="' + $$$.imgurl + data[i].img + '" data-id="' + data[i].isgot + '"  data-jid="' + data[i].jid + '" >'
				//console.log($$$.imgurl + data[i].img);

				str += '</div>'
			}
			str += '<div class="mui-slider-item mui-slider-item-duplicate" data-id="' + data[0].isgot + '"  data-jid="' + data[0].jid + '" onclick="gotolintopost(this)">'

			str += '<img src="' + $$$.imgurl + data[0].img + '" data-id="' + data[0].isgot + '"  data-jid="' + data[0].jid + '">'

			str += '</div>'
			str += '</div>'
			str += '<div class="mui-slider-indicator">'
			str += '<div class="mui-indicator mui-active"></div>'
			for(var x = 1; x < leng; x++) {
				str += '<div class="mui-indicator"></div>'
			}
			str += '</div>'

			//console.log(div); 
			div.innerHTML = str;
			var gallery = mui('.mui-slider');
			gallery.slider({
				//				preventDefault();
				interval: 3000 //自动轮播周期，若为0则不自动播放，默认为0；
			});

		}

		//轮播图，后台控制
		function gotolintopost(ti) {
			//alert(ti.getAttribute("data-id"));return;
			if(ti.getAttribute("data-id") == 1) {
				localStorage.setItem('jid', ti.getAttribute("data-jid"))
				mui.openWindow({
					url: 'app/job/job.html',
					id: 'job',
					createNew: false, //是否重复创建同样id的webview，默认为false:不重复创建，直接显示
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...', //等待对话框上显示的提示内容
					}
				})
			}
			if(ti.getAttribute("data-id") == 2) {
				mui.openWindow({
					url: 'app/tianzhuan/tiaozhuan.html',
					id: 'job',
					createNew: false, //是否重复创建同样id的webview，默认为false:不重复创建，直接显示
					waiting: {
						autoShow: true, //自动显示等待框，默认为true
						title: '正在加载...', //等待对话框上显示的提示内容
					}
				})
			}
		}

		function CreateList_index(option) {
			this.id = option.id || 'work_detail';
			this.bg = option.bg || '#fff';
			this.data = option.data;
			this.init();
		}
		CreateList_index.prototype = {
			init: function() {
				// 处理id
				var id = this.birthId(this.id);
				// 创建并插入预制组件
				var str = this.create(this.data);
				this.insert(id, str);
			},
			birthId: function(id) {
				var query = '#' + id;
				return query;
			},
			create: function(data) {
				/*定义组件字符串*/
				var tags = data.tag_cn.split(',');
				var leng = 0;
				if(tags.length > 3) {
					leng = 3;

				} else {
					leng = tags.length;
				}
				var srce = '';
				for(var i = 0; i < leng; i++) {
					// alert(tags[i]); 
					srce += '<span style="font-size:10px;line-height: 12px;height:16px;padding:2px 4px;box-sizing: border-box;display: inline-block;text-align: center;border:1px solid #5CA8FC;border-radius: 5px;color:#5CA8FC;margin-right:3px;">' + tags[i] + '</span>';
				}
				var result = '';
				// 立即执行函数，只是为了可以点击折叠按钮而已，没有实际功能。里边放置的是result(职位详细信息字符串)
				(function(data) {
					result += '<li id="2" class="mui-table-view-cell " style="width:100%;padding-left:3px;padding-bottom:1px;padding-top:6px;border-bottom:1px solid #CDCDCD;" data-id="' + data.jid + '">';
					result += '<div style="padding:3px 0;">';
					// 左侧头像
					result += '<div style="width:23%;float:left;padding-right:10px;">';
					result += '<img src="' + $$$.imgurl + data.logo + '" style="margin-left: 5px;width:100%;height:62px;border-radius: 8px;">';
					result += '</div>';
					// 右侧详细信息
					result += '<div class="" style="float:left;width:77%;">';
					result += '<div class="" style="width:100%">';

					result += '<div  class="">';
					result += '<div class="" style="font-weight:700;font-size:14px;padding-bottom:10px;line-height: 14px;">' + data.jobs_name + '</div>';
					result += '</div>';

					result += zhiding;

					result += '<div  class="" style="position: relative;font-size:14px;padding-bottom: 7px;line-height: 12px;">';
					result += '<div class="" style="color:#737373;">' + data.category_cn + '</div>';
					result += '<div class="" style="color:#ff7113;font-size:1.2em;position:absolute;right:0px;top:0;">' + data.minwage + '-' + data.maxwage + '元</div>';
					result += '</div>';

					result += '<div  class="" style="position:relative;font-size:10px;">';
					result += '<div class="">';
					result += srce;
					result += '</div>';
					result += '<div class="" style="position: absolute;right:0px;bottom:0;">' + data.district_cn + '</div>';
					result += '</div>';
					result += '</div>';
					result += '</div>';
					result += '</div>';
					result += '</li>';
				})(data);
				return result;
			},
			insert: function(id, result) {
				var div = document.createElement('div');
				div.innerHTML = result;
				div.addEventListener('click', function() {
					goJobLink(div.children[0]);

				})
				var box = document.querySelector(id);
				if(box.appendChild) {
					box.appendChild(div);

				} else {
					box.append(div);
				}
				//  	console.log(div);
			}
		};
		//到下一个页面
		function goJobLink(t) {

			var jid = t.getAttribute("data-id", jid);
			//alert(jid);
			localStorage.setItem('jid', jid);
			//var jid = localStorage.getItem('jid');	   
			// alert(jid);
			mui.openWindow({
				url: 'app/job/job.html',
				id: 'job',
				extras: {
					// jid:jid
				},
				createNew: false, //是否重复创建同样id的webview，默认为false:不重复创建，直接显示
				waiting: {
					autoShow: false, //自动显示等待框，默认为true
					title: '正在加载...', //等待对话框上显示的提示内容
				}
			})
		}


		mui.init({
			swipeBack: false,
			pullRefresh: {
				container: '#pullrefresh',
				down: {
					callback: pulldownRefresh
				},
				up: {
					contentrefresh: '正在加载...',
					callback: pullupRefresh
				}
			}
		});
		/**
		 * 下拉刷新具体业务实现
		 */
		function pulldownRefresh() {
			setTimeout(function() {
				location.reload()
				mui('#pullrefresh').pullRefresh().endPulldownToRefresh(); //refresh completed
			}, 1000);
		}

		/**
		 * 上拉加载具体业务实现
		 */
		var page = 1;

		function pullupRefresh() {

			setTimeout(function() {
				//				alert(page)
				mui('#pullrefresh').pullRefresh().endPullupToRefresh((++page > 5)); //参数为true代表没有更多数据了。
				//						alert(page)
				mui.ajax($$$.siturl + 'm=App&c=index&a=index&page=' + page, {
					type: 'GET',
					dataType: 'json',
					success: function(data) {
						var jobs = data.data;
						for(var x = 0; x < jobs.length; x++) {
							new CreateList_index({
								id: 'job_list',
								bg: '',
								data: jobs[x]
							})
						}
					},
					error: function(e) {
						//  alert(e);
					}
				});

			}, 1000);
		}
	</script>
	</body>

</html>