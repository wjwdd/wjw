		mui.init();
		  var divaq="";
		document.addEventListener("plusready", onPlusReady, false);	
			   function onPlusReady() {
				/*****************获取用户信息*******************/	   	
					   plus.geolocation.getCurrentPosition(function(p) {
							//alert(JSON.stringify(p))
							var latitude=p.coords.latitude;
							var longitude=p.coords.longitude;
							mui.ajax($$$.siturl + 'm=App&c=Index&a=nearbyJobApp',{
			                        type:'get', 
									data:{
			                            lat:latitude,
			                            lng:longitude
//			                            lat:1000,
//										lng:2000
									},
			                        success : function(str) {
										//alert(str);
			                            var data = JSON.parse(str);
			                            if(data.staus===0)
			                             	mui.toast(data.staus); 
			                          if(data.staus===1)
			                         
		                                divaq+='<div>'
		                            	divaq+='<span style="text-align center;margin-left: 30%;margin-top: 100px;" top="100px">'
		                            	divaq+='您的附近暂无职位'
		                            	divaq+='</span>'
		                            	divaq+='</div>';
			                            // 职位详细信息
			                            var dataotlist = data.data;
			                            if(dataotlist==undefined){
			                            	
			                            	document.querySelector("#job_list").innerHTML=divaq;
			                            	return;
			                            }
			                            
			                            if(dataotlist.length==undefined){
			                                document.querySelector("#job_list").innerHTML=divaq;
			                            	return
			                            }
			                            
			                            for(var j = 0; j < dataotlist.length; j++){
			                                new CreateList_index({
			                                    id:'job_list',
			                                    data:dataotlist[j]
			                                })
			                            }
			                            var ul = document.querySelector('#job_list')
										var lis = ul.children;
										for(var x = 0 ;x < lis.length; x++){
											lis[x].addEventListener('click',function(){
												var id = this.children[0].getAttribute('data-id');
												localStorage.setItem('jid',id);
					//							alert(localStorage.getItem('jid'))
											})
										}
			                        },
			                        error : function(e) {
			                            //mui.alert(e);
			                        }
							})
			/*****************获取用户信息失败*******************/		
						}, function(e) {
				});
				if(mui.os.android){
						getGEO_status();
				}else if(mui.os.ios){
            	var CLLocationManager = plus.ios.import("CLLocationManager");
						var authorizationStatus = CLLocationManager.authorizationStatus();
						console.log(authorizationStatus);
						switch(authorizationStatus) {
						      case 0:
						      /// User has not yet made a choice with regards to this application
						      break;
						      case 1:
						      // This application is not authorized to use location services.  Due
						    // to active restrictions on location services, the user cannot change
						    // this status, and may not have personally denied authorization
						      break;
						      case 2:
							        // User has explicitly denied authorization for this application, or
							    // location services are disabled in Settings.
							    mui.alert('请打开gps');
						      break;
						      case 3:
						        // User has granted authorization to use their location at any time,
						    // including monitoring for regions, visits, or significant location changes.
						      break;
						      case 4:
						       // User has granted authorization to use their location only when your app
						    // is visible to them (it will be made visible to them if you continue to
						    // receive location updates while in the background).  Authorization to use
						    // launch APIs has not been granted.
						      break;
						      case 5:
						     // This value is deprecated, but was equivalent to the new -Always value.
						      break;
						      defalut:
						      break;
						}
		            }
            }
//			   
				function getGEO_status(){
		            var context = plus.android.importClass("android.content.Context");
		            var locationManager=plus.android.importClass("android.location.LocationManager");
		            var main=plus.android.runtimeMainActivity();
		            var mainSvr=main.getSystemService(context.LOCATION_SERVICE);
		            console.log(mainSvr.isProviderEnabled(locationManager.GPS_PROVIDER));
		            if(!mainSvr.isProviderEnabled(locationManager.GPS_PROVIDER)){
		            
		            	 
			                var btnArray = ['否', '是'];
			                mui.confirm('是否开启gps', '提示', btnArray, function(e) {
			                    if (e.index == 1) {
			                        var main = plus.android.runtimeMainActivity(); //获取activity
									var Intent = plus.android.importClass('android.content.Intent');
									var Settings = plus.android.importClass('android.provider.Settings');
									var intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);//可设置表中所有Action字段
									main.startActivity(intent);
			                    } else {
			                        mui.alert('您点击了取消');
			                    }
			                })
			            
//		            	
					
		        	}
				
            }
            	
		
		<!--函数定义-->
		
            function CreateList_index (option){
                this.id = option.id || 'work_detail';
                this.data = option.data;
                this.init();
            }
            CreateList_index.prototype = {
                init:function () {
                    // 处理id
                    var id = this.birthId(this.id);
                    // 创建并插入预制组件
                    var str = this.create(this.data);
                    this.insert(id,str);
                },
                birthId:function (id) {
                    var query = '#' + id;
                    return query;
                },
                create:function (data) {
					/*定义组件字符串*/
                    var tags = data.tag_cn.split(',');
                    var leng=0;
                    if(tags.length>3){
                        leng=3;

                    }else{
                        leng=tags.length;
                    }
                    var srce='';
                    for (var i=0; i <leng; i++) {
		                var tageclass=this.tagcolor(tags[i]);
		                srce+='<span style="font-size:10px;line-height: 12px;height:16px;padding:2px 4px;box-sizing: border-box;display: inline-block;text-align: center;border-radius: 5px;margin-right:3px;" class="'+tageclass+'" >'+tags[i]+'</span>';
                    }
                    var result = '';
                    // 立即执行函数，只是为了可以点击折叠按钮而已，没有实际功能。里边放置的是result(职位详细信息字符串)
			            (function(data){
			            	result += '';
			                result += '<li  class="mui-table-view-cell" style="width:100%;padding-left:3px;padding-bottom:1px;padding-top:6px;margin-top:1px;background:#fff;margin-bottom:4px;" data-id="'+data.jid+'">';
			                result += '<div style="padding:0px 0px;margin:0 0 0 0 ;">';
			                result += '<div style="width:23%;float:left;padding-right:13px;">';
			                result += '<img src="' + $$$.imgurl + data.logo+'" style="margin-left: 5px;width:100%;height:62px;border-radius: 8px;">';
			                result += '</div>';
			                result += '<div class="" style="float:left;width:77%;">';
			                result += '<div class="" style="width:100%">';
			                result += '<div  class="">';
			                result += '<div class="" style="font-weight:700;font-size:14px;padding-bottom:5px;line-height: 14px;">'+data.jobs_name+'</div>';
			                result += '</div>';
			                result += '<div  class="" style="position: relative;font-size:12px;padding-bottom: 7px;line-height: 12px;">';
			                result += '<div class="" style="color:#737373;">'+data.category_cn+'</div>';
			                result += '<div class="wagecolor" style="font-size:1.5em;position:absolute;right:13px;top:0;">'+data.minwage+'-'+data.maxwage+'元</div>';
			                result += '</div>';
			                result += '<div  class="" style="position:relative;font-size:15px;">';
			                result += '<div class="">';
			                result += srce;
			                result += '</div>';
			                result += '<div class="dis" style="position: absolute;right:13px;bottom:0;font-size:14px;top:3px">'+data.district_cn+'</div>';
			                result += '</div>';
			                result += '</div>';
			                result += '</div>';
			                result += '</div>';
			                result += '</li>';
			                result += ''
			            })(data);
                    return result;
                },
                insert:function (id,result) {
                    var div = document.createElement('div');
                    div.innerHTML = result;
                    div.addEventListener('click',function(){
                        goJobLink();
                    })
                    var box = document.querySelector(id);
                    if(box.appendChild){
                        box.appendChild(div);
                    }else{
                        box.append(div);
                    }
                },
                tagcolor:function(y){
					if(y == '年终奖') return 'tag1';
						else if(y == '工作餐')
							return 'tag2';
						else if(y == '五险一金')
							return 'tag3';
						else if(y == '长白班')
							return 'tag4';
						else if(y == '两班倒')
							return 'tag5';
						else if(y == '双休')
							return 'tag6';
						else if(y == '工作轻松')
							return 'tag3';
						else if(y == '单休')
							return 'tag4';
						else if(y == '恒温车间')
							return 'tag5';
						else if(y == '坐着上班')
							return 'tag5';
						else
							return 'tag7';
		
				},
            };


            function goJobLink(){
                var jid = localStorage.getItem('jid');
                mui.openWindow({
                    url:'../../job/job.html',
                    id:'job',
                    extras:{
                        jid:jid
                    },
                    createNew:false,//是否重复创建同样id的webview，默认为false:不重复创建，直接显示
                    waiting:{
                        autoShow:true,//自动显示等待框，默认为true
                        title:'正在加载...',//等待对话框上显示的提示内容
                    }
                })
            }
	